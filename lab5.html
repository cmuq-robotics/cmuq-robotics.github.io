<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Lab 5: Mapping and Navigation &mdash; cmuq-robotics.github.io  documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Lab 4: Localization using AMCL" href="lab4.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> cmuq-robotics.github.io
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="logistics.html">Logistics</a></li>
<li class="toctree-l1"><a class="reference internal" href="batteries.html">Recharging the Robot Batteries</a></li>
<li class="toctree-l1"><a class="reference internal" href="lab0.html">Lab 0: Installation of the ROS environment for robot control and simulation</a></li>
<li class="toctree-l1"><a class="reference internal" href="lab1.html">Lab 1: Moving the TurtleBot3</a></li>
<li class="toctree-l1"><a class="reference internal" href="lab2.html">Lab 1: Moving the TurtleBot3</a></li>
<li class="toctree-l1"><a class="reference internal" href="lab3.html">Lab 3: ARTag tracking with Alvar</a></li>
<li class="toctree-l1"><a class="reference internal" href="lab4.html">Lab 4: Localization using AMCL</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Lab 5: Mapping and Navigation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#getting-started">Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="#launching-the-example">Launching the example</a></li>
<li class="toctree-l2"><a class="reference internal" href="#part-i-using-gmapping">Part I: Using GMapping</a></li>
<li class="toctree-l2"><a class="reference internal" href="#part-ii-using-the-ros-navigation-stack">Part II: Using the ROS navigation stack</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">cmuq-robotics.github.io</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Lab 5: Mapping and Navigation</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/lab5.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="lab-5-mapping-and-navigation">
<h1>Lab 5: Mapping and Navigation<a class="headerlink" href="#lab-5-mapping-and-navigation" title="Permalink to this headline"></a></h1>
<p>In this lab, we will use <cite>gmapping</cite> package for SLAM. The gmappimg algorithm
implements SLAM using a Rao- Blackwellized particle filter. It is probably the
most used SLAM algorithm in ROS. In the first part of the lab, you will use
gmapping to build your own map. In the second part, you will launch the ROS
Navigation Stack to let your robot move autonomously.</p>
<section id="getting-started">
<h2>Getting Started<a class="headerlink" href="#getting-started" title="Permalink to this headline"></a></h2>
<p>Install the <cite>navigation</cite> ros package in your VM.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo apt install ros-melodic-navigation
</pre></div>
</div>
<p>Clone the example code into your catkin workspace:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> ~/catkin_ws/src
git clone https://github.com/cmuq-robotics/cmuq-turtlebot-remote.git
</pre></div>
</div>
</section>
<section id="launching-the-example">
<h2>Launching the example<a class="headerlink" href="#launching-the-example" title="Permalink to this headline"></a></h2>
<p>Connect to one of the robots and edit the file <cite>connect_robot.sh</cite> with the correct values.</p>
<p>Open a new terminal window and set the environment variables:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">source</span> ~/connect_robot.sh
</pre></div>
</div>
<p>Use the tool <cite>rostopic</cite> to see the list of topics currently used in the network and check that you can connect to your robot.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>rostopic list
</pre></div>
</div>
<p>Launch the <cite>teleop_key</cite> node to move your robot:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>roslaunch turtlebot_teleop keyboard_teleop.launch
</pre></div>
</div>
</section>
<section id="part-i-using-gmapping">
<h2>Part I: Using GMapping<a class="headerlink" href="#part-i-using-gmapping" title="Permalink to this headline"></a></h2>
<p>For the first part, use <cite>gmapping</cite> to build our own map. Gmapping implements a
laser-based SLAM algorithm with a particle filter. We will study SLAM in the next weeks. For now, let’s
learn how to use it.</p>
<p>Open a new terminal window and set the environment variables:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">source</span> ~/connect_robot.sh
</pre></div>
</div>
<p>Launch the <cite>gmapping_demo</cite></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>roslaunch gmapping_demo gmapping.launch
</pre></div>
</div>
<p>In a new terminal, set the environment variables and run:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">source</span> ~/connect_robot.sh
roslaunch turtlebot_rviz_launchers view_navigation.launch
</pre></div>
</div>
<p>You should now have an RViz window.</p>
<p>While moving your robot, you will observe how the map is being built.</p>
<a class="reference internal image-reference" href="_images/gmapping_1.png"><img alt="Alternative text" src="_images/gmapping_1.png" style="width: 600px;" /></a>
<p>When you are done, you can save the map. In a new terminal, set the environment variables and run:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">source</span> ~/connect_robot.sh
rosrun map_server map_saver -f ~/catkin_ws/src/cmuq-turtlebot-remote/turtlebot2_navigation/current_map/map
</pre></div>
</div>
<p>You now have a copy of the map in your catkin workspace.</p>
<p>Now it’s time to stop gmapping and start the navigation stack.</p>
</section>
<section id="part-ii-using-the-ros-navigation-stack">
<h2>Part II: Using the ROS navigation stack<a class="headerlink" href="#part-ii-using-the-ros-navigation-stack" title="Permalink to this headline"></a></h2>
<p>For the second part, you should kill all the nodes launched in the first part, including rviz.</p>
<p>Open a new terminal window and set the environment variables:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">source</span> ~/connect_robot.sh
</pre></div>
</div>
<p>Launch the <cite>navigation</cite> stack</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>roslaunch turtlebot2_navigation navigate.launch
</pre></div>
</div>
<p>In a new terminal, set the environment variables and run:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">source</span> ~/connect_robot.sh
roslaunch turtlebot_rviz_launchers view_navigation.launch
</pre></div>
</div>
<p>You should now have an RViz window.</p>
<p>Localize your robot like we did in the last lab. Then, send a goal pose and see the magic happen.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="lab4.html" class="btn btn-neutral float-left" title="Lab 4: Localization using AMCL" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, efeoflus.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>